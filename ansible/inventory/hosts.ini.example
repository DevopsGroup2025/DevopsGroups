# =============================================================================
# Ansible Inventory - Example File
# =============================================================================
# This file is auto-generated by Terraform after `terraform apply`
# DO NOT edit manually - changes will be overwritten
#
# Architecture: Bastion (public) -> App Servers (private) -> RDS (private)
# =============================================================================

# -----------------------------------------------------------------------------
# Bastion Host (Public - SSH Jump Host + Load Balancer)
# -----------------------------------------------------------------------------
[bastion]
# <bastion_public_ip> ansible_user=ec2-user

[bastion:vars]
ansible_ssh_private_key_file=../ansible/keys/terraform-ansible-webapp-key.pem
ansible_ssh_common_args=-o StrictHostKeyChecking=no
ansible_python_interpreter=/usr/bin/python3
instance_role=bastion

# -----------------------------------------------------------------------------
# Frontend Server (Private - Next.js)
# -----------------------------------------------------------------------------
[frontend]
# <frontend_private_ip> ansible_user=ec2-user

[frontend:vars]
ansible_ssh_private_key_file=../ansible/keys/terraform-ansible-webapp-key.pem
ansible_ssh_common_args=-o StrictHostKeyChecking=no -o ProxyJump=ec2-user@<bastion_public_ip>
ansible_python_interpreter=/usr/bin/python3
instance_role=frontend

# -----------------------------------------------------------------------------
# Backend Server (Private - NestJS)
# -----------------------------------------------------------------------------
[backend]
# <backend_private_ip> ansible_user=ec2-user

[backend:vars]
ansible_ssh_private_key_file=../ansible/keys/terraform-ansible-webapp-key.pem
ansible_ssh_common_args=-o StrictHostKeyChecking=no -o ProxyJump=ec2-user@<bastion_public_ip>
ansible_python_interpreter=/usr/bin/python3
instance_role=backend

# -----------------------------------------------------------------------------
# Application Servers Group (Frontend + Backend)
# -----------------------------------------------------------------------------
[app:children]
frontend
backend

# -----------------------------------------------------------------------------
# All Servers Group
# -----------------------------------------------------------------------------
[all:children]
bastion
app

# -----------------------------------------------------------------------------
# Global Variables
# -----------------------------------------------------------------------------
[all:vars]
# Database Configuration
db_host=<rds_endpoint>
db_port=5432
db_name=notesdb
db_username=dbadmin

# ECR Configuration
ecr_registry=<account_id>.dkr.ecr.<region>.amazonaws.com
ecr_backend_repo=<account_id>.dkr.ecr.<region>.amazonaws.com/terraform-ansible-webapp-backend
ecr_frontend_repo=<account_id>.dkr.ecr.<region>.amazonaws.com/terraform-ansible-webapp-frontend
ecr_proxy_repo=<account_id>.dkr.ecr.<region>.amazonaws.com/terraform-ansible-webapp-proxy
aws_region=eu-west-1

# Instance IPs (for internal communication)
bastion_public_ip=<bastion_public_ip>
frontend_private_ip=<frontend_private_ip>
backend_private_ip=<backend_private_ip>

